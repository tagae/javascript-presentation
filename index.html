<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>The Yin and Yang of JavaScript</title>
    <meta name="description" content="Introduction to the JavaScript language">
  </head>
  <body class="reveal">
    <div class="slides">

      <section class="deck-slide">
        <h1>JavaScript</h1>
        <h2>The Yin and Yang of Functions and Objects</h2>
        <img src="media/Yin-Yang.svg" width="30%" class="zen">
        <p class="author">By Sebastián González</p>
      </section>

      <section>
        <h2>Presentation Structure</h2>
        <p>Go right (&rightarrow;) to change topic</p>
        <p>Go down (&downarrow;) to deepen topic</p>
      </section>

      <section>
        <section>
          <h2>JavaScript</h2>
          <h4><a href="http://crockford.com/javascript/javascript.html">
              The World's Most Misunderstood Programming Language
          </a></h4>
          <p>
            JavaScript is often derided as being a toy,<br/> but beneath its
            layer of deceptive simplicity,<br/> powerful language features
            await.
          </p>
        </section>
        <section>
          <p>JavaScript was created in 1995 by Brendan Eich</p>
          <img src="media/Netscape-2.0.gif">
          <p>Shipped early 1996 as part of Netscape Navigator 2.0</p>
        </section>
        <section>
          <div class="row">
            <img src="media/ECMA-262.jpg" width="40%" style="margin-right: 1em">
            <ul>
              <li>1st ed. 1997</li>
              <li>2nd ed. 1998</li>
              <li>3rd ed. 1999</li>
              <li>4th not published</li>
              <li>5th ed. 2009<br/>
                <small>a.k.a. es5</small></li>
              <li>5.1th ed. 2011<br/>
              </li>
              <li><a href="https://www.ecma-international.org/ecma-262/6.0/index.html">6th ed. 2015</a><br/>
                <small>ECMAScript 2015, a.k.a. es6</small>
              </li>
              <li><a href="https://www.ecma-international.org/ecma-262/7.0/index.html">7th ed. 2016</a><br/>
                <small>ECMAScript 2016, a.k.a. es7</small>
              </li>
              <li><a href="https://www.ecma-international.org/ecma-262/8.0/index.html">8th ed. 2017</a><br/>
                <small>ECMAScript 2017, a.k.a. es8</small>
              </li>
            </ul>
          </div>

        </section>
        <section>
          <p>Unlike most programming languages, JavaScript has no concept of
            input or output. JavaScript is designed to run as a scripting
            language in a host environment, and it is up to the host
            environment to provide mechanisms for communicating with the
            outside world.</p>
          <p>Host environments:</p>
          <dl>
            <dt>
              Browser
            </dt>
            <dt>
            <dt>
              Node.js
            </dt>
          </dl>
        </section>
      </section>

      <section>
        <p>Let's dive in!</p>
      </section>

      <section>
        <h1>Literals</h1>
      </section>

      <section>
        <h2>Null</h2>
        <p>No content</p>
        <p>Deliberate non-value</p>
        <pre><code>null</code></pre>
      </section>

      <section>
        <h2>Undefined</h2>
        <p>Uninitialised</p>
        <p>Not known</p>
        <pre><code>undefined</code></pre>
      </section>

      <section>
        <section>
          <h2>Booleans</h2>
          <pre><code>
              true

              false
          </code></pre>
        </section>
        <section>
          <h2>Boolean Operators</h2>
          <pre><code>
              ! a     // negation

              a && b  // conjunction

              a || b  // disjunction
          </code></pre>
        </section>
        <section>
          <h2>Falsy Values</h2>
          <div class="bi-column-box bi-column-box-left">
            <pre><code data-trim>
                false
                null
                undefined
                '' // empty string
                0
                NaN
            </code></pre>
          </div>
          <div class="bi-column-box bi-column-box-right">
            <pre><code data-trim>
                ! false     === true
                ! null      === true
                ! undefined === true
                ! ''        === true
                ! 0         === true
                ! NaN       === true
            </code></pre>
          </div>
        </section>
        <section>
          <h2>Truthy Values</h2>
          <p>Any value that is not falsy</p>
          <div class="bi-column-box bi-column-box-left">
            <pre><code data-trim>
                true
                []
                {}
                42
                'foo'
                Infinity
                …
            </code></pre>
          </div>
          <div class="bi-column-box bi-column-box-right">
            <pre><code data-trim>
                ! true     === false
                ! []       === false
                ! {}       === false
                ! 42       === false
                ! 'foo'    === false
                ! Infinity === false
                …
            </code></pre>
          </div>
        </section>
        <section>
          <h6>Idiom</h6>
          <h2>Conversion to boolean</h2>
          <pre><code>
              !! null === false

              !! 'foo' === true
          </code></pre>
        </section>
        <section>
          <h6>Idiom</h6>
          <h2>Pick first truthy</h2>
          <pre><code data-trim>
              let username = person.name || person.nickname || 'Uncle Bob'
          </code></pre>
        </section>
        <section>
          <h6>Idiom</h6>
          <h2>Safe navigation</h2>
          <pre><code>
              let owner = account && account.owner()
          </code></pre>
        </section>
      </section>

      <section>
        <section>
          <h2>Numbers</h2>
          <p>The one and only numeric data type</p>
          <p><small>spec: “double-precision 64-bit format IEEE 754 values”</small></p>
          <p>No distinction between ints, fixnums, etc.</p>
          <pre><code>
            1

            3.5

            3 === 3.0    // true

            8 / 3        // 2.666666… (no int division!)

            5 % 2        // 1

            9e2          // 900

            0b111110111  // 503 (binary notation)

            0o767        // 503 (octal notation)
          </code></pre>
        </section>
        <section>
          <h2>Special (Non)Numbers</h2>
          <pre><code>
              1 / 0 === Infinity

              -1 / 0 === -Infinity

              isFinite(Infinity) === false

              Math.sqrt(-1) // NaN

              NaN === NaN // false

              isNaN(NaN) // true

              NaN + 5 // NaN
          </code></pre>
        </section>
        <section>
          <h6>Idiom</h6>
          <h2>Conversion to number</h2>
          <pre><code>
              +'23' === 23

              +'0x10' === 16

              +age
          </code></pre>
        </section>
      </section>

      <section>
        <section>
          <h2>Strings</h2>
          <pre><code data-trim>
              'string in single quotes'

              "double quotes ain't bad for strings containing apostrophes"
          </code></pre>
        </section>
        <section>
          <h2>String interpolation</h2>
          <pre><code data-trim>
              let aName = 'Bob';

              `template string in which $&#123;aName&#125; can be interpolated`

              `multi-line
                 templates
                   can be handy`
          </code></pre>
        </section>
      </section>

            <section>
        <section>
          <h2>Arrays</h2>
          <pre><code>
            [1, 2, 3]

            ['mixed', 'types', 1, true]

            ['outer', 'array', ['nested', 'array']]
          </code></pre>
        </section>
        <section>
          <h2>Array Operations</h2>
          <pre><code>
              ['a', 'b', 'c'][1] === 'b'

              ['a', 'b', 'c'].length === 3
          </code></pre>
        </section>
        <section>
          <h2>Array Spread Operator</h2>
          <pre><code>
              // an array can be spread into another
              let b = [3, 4]
              let a = [1, 2, ...b]
              a === [1, 2, 3, 4]

              // multiple spreads can occur
              let c = [1, 2]
              let d = [3, 4]
              let e = [...c, ...d]
              e === [1, 2, 3, 4]

              // any iterable can be spread
              let str = 'foo'
              let chars = [...str] // ['f', 'o', 'o']
          </code></pre>
        </section>
        <section>
          <h2>Arrays as objects</h2>
          <p>Array indices are used as property names</p>
          <pre><code class="typescript">
              let k = []
              k.length === 0

              k['0'] = 1      // create entry
              k.length === 1
              k[0] === 1

              k['8'] = 1      // create entry
              k.length === 9
              k[1] === undefined
              k[2] === undefined
              …
              k[7] === undefined
              k[8] === 1

              delete k[8]
              k.length === 9
          </code></pre>
        </section>
      </section>

      <section>
        <h2>Regular Expressions</h2>
        <pre><code class="typescript">
            /simple pattern/

            /^complex pattern\s+(\d+)/

            /iGnoRe cASE oPtiOn/i

            …
        </code></pre>
      </section>

      <section>
        <section>
          <img src="media/Queen-crown.png" width="30%" class="zen">
          <h2>Functions</h2>
          <p><small>
              a.k.a. anonymous functions<br/>
              a.k.a. arrow functions
          </small></p>
          <pre><code>
            x => x + 1

            (x) => x + 1

            (x) => { return x + 1 }
          </code></pre>
          <p>all of the above are equivalent</p>
        </section>
        <section>
          <h2>Named Functions</h2>
          <pre><code>
              function increment(x) {
                 return x + 1;
              }

              function gcd(x, y) {
                 if (x > y) return gcd(y, x);
                 if (x === 0) return y;
                 return gcd(y % x, x)
              }
          </code></pre>
          <div class="fragment">
          <p>same as</p>
          <pre><code>
              var increment = x => x + 1

              var gcd = (x, y) => {
                 if (x > y) return gcd(y, x);
                 if (x === 0) return y;
                 return gcd(y % x, x)
              };
          </code></pre>
          </div>
        </section>
        <section>
          <h2>Functions are values</h2>
          <p><small>a.k.a. Higher Order Programming</small></p>
          <p>Just like any other value, functions can be</p>
          <ul>
            <li>assigned to variables,</li>
            <li>passed as arguments,</li>
            <li>returned</li>
          </ul>
          <pre><code>
              let increment = x => x + 1;
              [1, 2, 3].map(increment); // [2, 3, 4]
          </code></pre>
          <pre><code>
              function compose(f, g) {
                 return x => f(g(x))
              }

              compose(increment, x => x * 2)(5) // ?
          </code></pre>
        </section>
        <section>
          <h2>Function Application</h2>
          <pre><code>
              (x => x + 1)(1) // 2

              let increment = x => x + 1;

              increment(1) // 2
          </code></pre>
        </section>
        <section>
          <h2>Closures</h2>
          <p><small>a.k.a. lexical closures</small></p>
          <pre><code>
              function startAt(x) {
                 function incrementBy(y) {
                    return x + y;
                 }
                 return incrementBy;
              }

              let plus2 = startAt(2);

              plus2(5); // 7
          </code></pre>
          <pre><code>
           function derivative(f, dx) {
              return x => (f(x + dx) - f(x)) / dx;
           }
          </code></pre>
        </section>
      </section>

      <section>
        <section>
          <img src="media/King-crown.png" width="30%" class="zen">
          <h2>Objects</h2>
          <pre><code>
            {
               name: 'Bob Pop',
               age: 35,
               address: 'Tha Street 101, 1050 Elsene'
            }
          </code></pre>
        </section>
        <section>
          <h2>Property values</h2>
          <p>Properties can have any value</p>
          <pre><code data-trim>
              {
                 name: 'Bob Pop',                // string
                 age: 35,                        // number
                 address: {                      // object
                    street: 'Tha Street',
                    number: 101,
                    postCode: 1050,
                    city: 'Elsene'
                 },
                 hobbies: ['jogging', 'chess'],  // array
                 toString: function () {         // function
                    return `&dollar;{this.name} from &dollar;{this.address.city}`
                 }
              };
          </code></pre>
        </section>
        <section>
          <h2>Property Access</h2>
          <pre><code data-trim>
              let person = {
                 name: 'Bob Pop',
                 age: 35,
                 country: 'Jamaica',
                 toString: function() { return 'B.P.' }
              };

              person.name === 'Bob Pop' // literal

              person['age'] === 35 // computed

              person[localise('name', user.language)] // computed

              person.toString() === 'B.P.' // literal + function call

              person['toString']() === 'B.P.' // computed + function call
          </code></pre>
        </section>
        <section>
          <h2>Undefined properties</h2>
          <pre><code data-trim>
              person.foo === undefined // fail-soft (no exception)

              person.foo.bar // exception
          </code></pre>
        </section>
        <section>
          <h2>String Property Names</h2>
          <pre><code>
              {
                 "credit card number": 1029474622828,
                 "account number": 2323112,
                 "fidelity program": "gold",
                 "active account": true
              }
          </code></pre>
          <p>JavaScript Object Notation (JSON)</p>
        </section>
        <section>
          <h2>Computed property names</h2>
          <pre><code data-trim>
              {
                 [localise('name', user.language)]: user.name,
                 [localise('age', user.language)]: user.age,
                 [localise('city', user.language)]: user.city
              }
          </code></pre>
          <p>… could yield …</p>
          <pre><code data-trim>
              {
                 'Name': 'Helmut',
                 'Alter': 31,
                 'Stadt': 'Dusseldorf'
              }
          </code></pre>
        </section>
        <section>
          <h2>Property creation</h2>
          <pre><code data-trim>
              let person = {}                         // empty object

              person.name === undefined

              person.name = 'Jhon'                    // create property

              person.name === 'Jhon'                  // now exists

              person['city'.toUpperCase()] = 'Oslo'   // create property

              person.CITY === 'Oslo'                  // now exists
          </code></pre>
        </section>
        <section>
          <h2>Method definitions</h2>
          In ES5, methods are created like any other property:
          <pre><code>
var obj = {
    foo: function () {
        ···
    },
    bar: function () {
        this.foo();
    }
}
          </code></pre>
          ES6 introduces syntax for creating mehtods:
          <pre><code>
const obj = {
    foo() {
        ···
    },
    bar() {
        this.foo();
    },
}
          </code></pre>
        </section>
        <section>
          <h2>Object creation</h2>
          <p>maker functions</p>
          <pre><code>
            function makePoint(i, j) {
              return {
                x: i,
                y: j,
                toString() {
                  return `(&dollar;{this.x}, &dollar;{this.y})`
                }
              }
            }

            let point = makePoint(2, 3);
            point.x === 2
            point.toString() === '(2, 3)'
          </code></pre>
        </section>
        <section>
          <h2>Object inheritance</h2>
          <pre><code data-trim>
              let o = { a: 1 }
              // o —→ Object.prototype —→ null

              o.toString === Object.prototype.toString

              let a = ['some', 'array'];
              // a —→ Array.prototype —→ Object.prototype —→ null

              a.map === Array.prototype.map

              function f() { return 2 }
              // f —→ Function.prototype —→ Object.prototype —→ null

              f.apply === Function.prototype.apply
          </code></pre>
        </section>
        <section>
          <h2>Object inheritance</h2>
          <pre><code data-trim>
              let animal = {
                 kingdom: 'Animalia'
              };

              let insect = {
                 __proto__: animal,    // inheritance: insect –—→ animal
                 legs: 6
              };

              let bee = {
                 __proto__: insect,    // inheritance: bee –—→ insect
                 sound: 'buzz'
              };

              bee.legs === 6              // inherited from insect
              bee.kingdom === 'Animalia'  // inherited from animal
              bee.sound === 'buzz'        // own property

              insect.sound === undefined
              animal.legs === undefined
          </code></pre>
        </section>
        <section>
          <h2>Object inheritance</h2>
          <pre><code data-trim>
              let point = { x: 1, y: 2 }

              let a = Object.create(point);
              // a –—→ point –—→ Object.prototype –—→ null

              a.x === 1 // inherited

              let b = Object.create(a);
              // b –—→ a –—→ point –—→ Object.prototype –—→ null
          </code></pre>
          <p>Preferred over manipulating&nbsp; <code>__proto__</code> &nbsp;directly</p>
        </section>
      </section>

      <section>
        <section>
          <h2>Classes</h2>
          <pre><code data-trim>
              class Person {

                 constructor(name) {
                    this.name = name;
                 }

                 describe() {
                    return 'Person called ' + this.name;
                 }

              }

              let user = new Person('Ana Morova');

              user.describe() // 'Person called Ana Morova'
          </code></pre>
        </section>
        <section>
          <h2>Subclasses</h2>
          <pre><code data-trim>
              class Employee extends Person {

                 constructor(name, title) {
                    super(name);
                    this.title = title;
                 }

                 describe() {
                    return super.describe() +
                       ' (' + this.title + ')';
                 }

              }

              let bob = new Employee('Bob', 'manager')

              bob.describe() // 'Person called Bob (manager)'
          </code></pre>
        </section>
        <section>
          <h2>Static members</h2>
          <pre><code>
              class Point {

                 constructor(x, y) {
                    this.x = x;
                    this.y = y;
                 }

                 static at(x, y) {
                    return new Point(0, 0);
                 }

              }
          </code></pre>
        </section>
        <section>
          <h2>Class expressions</h2>
          <p>Classes are expressions:</p>
          <pre><code>
              let theClass = class Person {
                 …
              }

              new theClass('Bob')
          </code></pre>
          <p>Classes can be anonymous:</p>
          <pre><code>
              let Person = class {
                 …
              }

              let bob = new Person('Bob')
          </code></pre>
        </section>
        <section>
          <h6>idiom</h6>
          <h2>Mixins</h2>
          <p>Functions with superclass parameter</p>
          <pre><code>
              const Storage = Sup => class extends Sup {
                 save(database) { … }
              };
              const Validation = Sup => class extends Sup {
                 validate(schema) { … }
              };
          </code></pre>
          <pre><code data-trim>
              class Person { … }
              class Employee extends Storage(Validation(Person)) { … }
          </code></pre>
        </section>
      </section>

      <section>
        <h2>Value Hierarchy</h2>
        <ul class="object-listing">
          <li><code>null</code></li>
          <li><code>undefined</code></li>
          <li><code>Number</code></li>
          <li><code>String</code></li>
          <li><code>Boolean</code></li>
          <li><code>Symbol</code>
          </li>
          <li><code>Object</code>
            <ul>
              <li><code>Function</code></li>
              <li><code>Array</code></li>
              <li><code>RegExp</code></li>
              …
            </ul>
          </li>
        </ul>
      </section>

      <section>
        <section>
          <h2>Control Flow</h2>
        </section>
        <section>
          <h2>Conditionals</h2>
          <h3>If statement</h3>
          <pre><code>
              if (condition_1)
                 statement_1

              else if (condition_2)
                 statement_2

              …

              else if (condition_n)
                 statement_n

              else
                statement_last;
          </code></pre>
        </section>
        <section>
          <h2>Conditionals</h2>
          <h3>Switch statement</h3>
          <pre><code>
              switch (expression) {

                 case label_1:
                    statement_1
                    break;

                 case label_2:
                    statement_2
                    break;
                 …
                 default:
                    statement_def
                    break;

              }
          </code></pre>
        </section>
        <section>
          <h2>Throwing exceptions</h2>
          <pre><code>
              throw new Error('oops')
          </code></pre>
          <p>Any value can be thrown:</p>
          <pre><code>
              throw 'error'

              throw 42

              throw true

              throw {
                 toString: function() {
                    return 'holly cow!'
                 }
              }
          </code></pre>
        </section>
        <section>
          <h2>Catching exceptions</h2>
          <pre><code data-trim>
              openFile();

              try {

                 writeFile(theData);

              } catch(e) {

                 handleError(e);

              } finally {

                 closeFile();

              }
          </code></pre>
        </section>
        <section>
          <h2>Iteration</h2>
          <h3>for statement</h3>
          <pre><code class="typescript">
              for (let i = 0; i &lt; array.length; i++) {
                 result += array[i]
              }
          </code></pre>
        </section>
        <section>
          <h2>Iteration</h2>
          <h3>for…of statement</h3>
          <p>Goes over iterable objects</p>
          <pre><code class="typescript">
              let array = [3, 5, 7];
              for (let n of array) {
                 console.log(n); // logs 3, 5, 7
              }
          </code></pre>
        </section>
        <section>
          <h2>Iteration</h2>
          <h3>while statement</h3>
          <pre><code class="typescript">
              let n = 0;
              let x = 0;
              while (n < 3) {
                n++;
                x += n;
              }
          </code></pre>
        </section>
        <section>
          <h2>Iteration</h2>
          <h3>do…while statement</h3>
          <pre><code class="typescript">
              let i = 0;
              do {
                 i += 1;
                 console.log(i);
              } while (i < 5);
          </code></pre>
        </section>
      </section>

      <section>
        <section>
          <h2>Variables</h2>
          <pre><code>
              var color = 'red'
          </code></pre>
          <pre><code>
              let age = 21

              age++ // happy birthday!
          </code></pre>
          <pre><code>
              const pi = 3.1416

              pi += 0.1 // exception: don't break your math!
          </code></pre>
        </section>
        <section>
          <h2>Block scoping: <code>let</code></h2>
          <pre><code>
              { // block

                 let a = 1

                 a === 1

                 { // nested block

                    let a = 2

                    a === 2
                 }

                 a === 1

                 b = 0 // error: cannot access until declared

                 let b
              }
          </code></pre>
          same applies to <code>const</code>
        </section>
        <section>
          <h2>Function scoping: <code>var</code></h2>
          <pre><code>
              function a() {
                 …
                 var x = 0
                 …
              }
          </code></pre>
          equivalent to
          <pre><code>
              function a() {
                 var x = undefined
                 …
                 x = 0
                 …
              }
          </code></pre>
        </section>
        <section>
          <h2>Function scoping: <code>var</code></h2>
          <pre><code>
              function a() {
                 var a = 1
                 var a = 2 // allows redeclaration

                 a === 2
              }

              function func(arg) {
                 var arg; // redeclaration: does nothing
              }

              function func(arg) {
                 {
                    // same `var` scope as `arg`
                    var arg; // redeclaration: does nothing
                 }
              }
          </code></pre>
        </section>
        <section>
          <h2>Coding style:
            <code>const</code>,
            <code>let</code>,
            <code>var</code>
          </h2>
          <ol>
            <li>Use <code>const</code> whenever possible</li>
            <li>Otherwise use <code>let</code></li>
            <li>Avoid <code>var</code>
          </ol>
        </section>
        <section>
          <h6>Idiom</h6>
          <h4>Immediately-Invoked Function Expression</h4>
          <pre><code>
              (function () {
                 var tmp = …;
                 … // use tmp
              }())
              console.log(tmp) // ReferenceError
          </code></pre>
          deprecated by <code>let</code> within blocks:
          <pre><code>
          {
             let tmp = …;
             …
          }
          console.log(tmp) // ReferenceError
          </code></pre>
        </section>
        <section>
          <h2>Binding of variables in loops</h2>
          <pre><code>
              const arr = [];
              // var: single binding for whole loop
              for (var i = 0; i < 3; i++) {
                  arr.push(() => i);
              }
              arr.map(x => x()); // [3,3,3]
          </code></pre>
          <pre><code>
              const arr = [];
              // let: new binding for each iteration
              for (let i = 0; i < 3; i++) {
                  arr.push(() => i);
              }
              arr.map(x => x()); // [0,1,2]
          </code></pre>
        </section>
      </section>
      <section>
        <section>
          <h2>Destructuring</h2>
          <h5>Extracting data from objects</h5>
        </section>
        <section>
          <h2>Object destructuring</h2>
          <pre><code data-trim class="typescript">
              function point() { return { x: 1, y: 2, color: 'red' } }

              let { x, y } = point()         // destructure

              x === 1 && y === 2

              let { x: i, y: j } = point()   // with renaming

              i === 1 && j === 2

              let { x, y, z = 0 } = point()  // with default value

              x === 1 && y === 2 && z === 0

              let FOO = 'foo';
              let { [FOO]: f } = { foo: 123 }; // with computed prop name
              f === 123
          </code></pre>
        </section>
        <section>
          <h2>Array destructuring</h2>
          <pre><code data-trim class="typescript">
              // Array destructuring (with elision)
              let [a, , c] = [1, 2, 3];
              a === 1 && c === 3

              // idiom: swap variables
              [c, a] = [a, c]
              a === 3 && c === 1

              // Fail-soft array destructuring
              let [a] = [];
              a === undefined;

              // Fail-soft array destructuring with defaults
              let [a = 1] = [];
              a === 1;

              // Rest operator
              let [x, ...y] = ['a', 'b', 'c'];
              // x='a'; y=['b', 'c']

              // Rest operator against a smaller-than-expected array
              let [x, y, ...z] = ['a'];
              // x='a'; y=undefined; z=[]
          </code></pre>
          <aside class="notes">
            <p>&rightarrow; spread operator contributes data to array literals
              and function calls</p>
            <p>&rightarrow; the rest operator extracts data</p>
          </aside>
        </Section>
        <section>
          <h2>Parameter destructuring</h2>
          <pre><code>
              function func(FORMAL_PARAMETERS) {
                 CODE
              }
              func(ACTUAL_PARAMETERS);
          </code></pre>
          <p>is roughly equivalent to:</p>
          <pre><code>
      {
          let [FORMAL_PARAMETERS] = [ACTUAL_PARAMETERS];
          {
              CODE
          }
      }
          </code></pre>
          <p>Actuals are destructured into formals</p>
        </section>
        <section>
          <h6>Parameter Destructuring</h6>
          <h2>Example</h2>
          <pre><code>
              function logSum(x = 0, y = 0) {
                 console.log(x + y)
              }

              logSum(7, 8)
          </code></pre>
          <p>becomes upon evaluation</p>
          <pre><code>
              {
                 let [x = 0, y = 0] = [7, 8]
                 {
                    console.log(x + y)
                 }
              }
          </code></pre>
        </section>
        <section>
          <h2>Default Parameter Values</h2>
          <pre><code>
              function f(x, y = 7, z = 42) {
                 return x + y + z
              }

              f(1) === 50
          </code></pre>
        </section>
        <section>
          <h2>Rest Parameter</h2>
          <pre><code>
              function f(head, ...tail) {
                 return tail;
              }

              f(1, 2, 3, 4) === [2, 3, 4]
          </code></pre>
        </section>
        <section>
          <h2>Spread Operator</h2>
          <pre><code class="typescript">
              function f(x, y, z) {
                 return x + y + z;
              }

              f(...[1, 2, 3]) === f(1, 2, 3)

              f(...[1, 2, 3]) === 6

              let a = [1, 2, 3]

              f(...a) === 6
          </code></pre>
        </section>
        <section>
          <h6>Idiom</h6>
          <h2>Named arguments</h2>
          <pre><code data-trim class="typescript">
              function g({ name, end = '.' }) { return name + end }

              g({ name: 'Bob' }) === 'Bob.'

              g({ name: 'Bob', end: '!' }) === 'Bob!'
          </code></pre>
        </section>
        <section>
          <h2>Default Values</h2>
          <p>Default values are computed on demand</p>
          <pre><code class="typescript">
              const { prop: y = someFunc() } = someValue;
          </code></pre>
          equivalent to
          <pre><code class="typescript">
              let y;
              if (someValue.prop === undefined) {
                  y = someFunc();
              } else {
                  y = someValue.prop;
              }
          </code></pre>
        </section>
      </section>

      <section>
        <section>
          <h2>Modules</h2>
          <h3>Exporting</h3>
          <pre><code class="typescript">
              export const e = 2.71828182846

              export function sum(x, y) {
                 return x + y
              }

              export class Dog {
                 bark() { console.log('Wouf!') }
              }

              export { e, sum, Dog as Doggie }

              export * from 'lib/math'

              export default function(x) {
                 return Math.log(x)
              }
          </code></pre>
        </section>
        <section>
          <h2>Modules</h2>
          <h3>Importing</h3>
          <pre><code data-trim>
              import * as math from "lib/math"
              alert("2π = " + math.sum(math.pi, math.pi))
          </code></pre>
          <pre><code data-trim>
              import { sum, pi } from "lib/math"
              alert("2π = " + sum(pi, pi))
          </code></pre>
          <pre><code data-trim>
              import 'module' // no bindings: for side effects only

              import { Dog as Hond, Cat as Mus } from 'animals'

              import path from 'path' // default export

              import * as lodash from 'lodash' // all exports
          </code></pre>
        </section>
      </section>
      <section>
        <section>
          <h6>Asynchronous programming</h6>
          <h2>Execution model</h2>
          <img src="media/JavaScript-execution-model.svg"
               width="600" class="zen"/>
        </section>
        <section>
          <h2>Call stack</h2>
          <pre><code>
function job() {
   start()
   morningWork()
   lunch()
   afternoonWork()
   finish()
}
function start() { console.log('checked Facebook') }
function morningWork() { readMail(); sendMail() }
function lunch() { console.log('pizza') }
function afternoonWork() { deleteMail(); }
function finish() { console.log('phew!') }
function readMail() { console.log('read mail') }
function sendMail() { console.log('send mail') }
function deleteMail() { console.log('delete mail') }

job()
          </code></pre>
          <p><a href="http://latentflip.com/loupe/?code=ZnVuY3Rpb24gam9iKCkgewogICBzdGFydCgpCiAgIG1vcm5pbmdXb3JrKCkKICAgbHVuY2goKQogICBhZnRlcm5vb25Xb3JrKCkKICAgZmluaXNoKCkKfQpmdW5jdGlvbiBzdGFydCgpIHsgY29uc29sZS5sb2coJ2NoZWNrZWQgRmFjZWJvb2snKSB9CmZ1bmN0aW9uIG1vcm5pbmdXb3JrKCkgeyByZWFkTWFpbCgpOyBzZW5kTWFpbCgpIH0KZnVuY3Rpb24gbHVuY2goKSB7IGNvbnNvbGUubG9nKCdwaXp6YScpIH0KZnVuY3Rpb24gYWZ0ZXJub29uV29yaygpIHsgZGVsZXRlTWFpbCgpOyB9CmZ1bmN0aW9uIGZpbmlzaCgpIHsgY29uc29sZS5sb2coJ3BoZXchJykgfQpmdW5jdGlvbiByZWFkTWFpbCgpIHsgY29uc29sZS5sb2coJ3JlYWQgbWFpbCcpIH0KZnVuY3Rpb24gc2VuZE1haWwoKSB7IGNvbnNvbGUubG9nKCdzZW5kIG1haWwnKSB9CmZ1bmN0aW9uIGRlbGV0ZU1haWwoKSB7IGNvbnNvbGUubG9nKCdkZWxldGUgbWFpbCcpIH0KCmpvYigpCg%3D%3D!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D">See
          example</a></p>
        </section>
        <section>
          <h2>Event Loop</h2>
          <img src="media/event-loop.jpg" width="90%"/>
          <small>from <a href="http://exploringjs.com/">exploringjs.com</a></small>
          <aside class="notes">
            <p>The event loop runs continually, executing any tasks queued.</p>
            <p>An event loop has multiple task sources, but the browser gets to
          pick which source to take a task from on each turn of the loop. This
          allows the browser to give preference to performance sensitive tasks
          such as user-input.</p>
          </aside>
        </section>
        <section>
          <h2>Events</h2>
          <h6>User interaction</h6>
          <button id="click-me" class="big-button">Useless button</button>
          <pre><code>
        // grab a reference to the button
        let button = document.getElementById('click-me');

        // register event listener
        button.addEventListener('click', () => {
           console.log('clicked!');
        });

        // ready to receive messages from click events!
          </code></pre>
          <p><a href="http://latentflip.com/loupe/?code=JC5vbignYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gb25DbGljaygpIHsKICBjb25zb2xlLmxvZygiY2xpY2tlZCEiKTsKfSk7Cg%3D%3D!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D">See example</a></p>
        </section>
        <section>
          <h2>Events</h2>
          <h6>Timers</h6>
          <pre><code>
              setTimeout(() => {
                 console.log('At least 3 seconds elapsed');
              }, 3000);
          </code></pre>
          <a href="http://latentflip.com/loupe/?code=c2V0VGltZW91dChmdW5jdGlvbiB0aHJlZVNlY29uZHMoKSB7CiAgIGNvbnNvbGUubG9nKCdBdCBsZWFzdCAzIHNlY29uZHMgZWxhcHNlZCcpOwp9LCAzMDAwKTsK!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D">See example</a>
        </section>
        <section>
          <h2>Events</h2>
          <p>What will this print on the console?</p>
          <pre><code>
              console.log('this is the start');

              setTimeout(function a() {
                 console.log('this is a msg from a()');
              }, 0);

              console.log('this is just a message');

              setTimeout(function b() {
                 console.log('this is a msg from b()');
              }, 0);

              console.log('this is the end');
          </code></pre>
          <p><a href="http://latentflip.com/loupe/?code=Y29uc29sZS5sb2coJ3RoaXMgaXMgdGhlIHN0YXJ0Jyk7CgpzZXRUaW1lb3V0KGZ1bmN0aW9uIGEoKSB7CiAgY29uc29sZS5sb2coJ3RoaXMgaXMgYSBtc2cgZnJvbSBhKCknKTsKfSwgMCk7Cgpjb25zb2xlLmxvZygndGhpcyBpcyBqdXN0IGEgbWVzc2FnZScpOwoKc2V0VGltZW91dChmdW5jdGlvbiBiKCkgewogIGNvbnNvbGUubG9nKCd0aGlzIGlzIGEgbXNnIGZyb20gYigpJyk7Cn0sIDApOwoKY29uc29sZS5sb2coJ3RoaXMgaXMgdGhlIGVuZCcpOw%3D%3D!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D">See example</a></p>
        </section>
      </section>

      <section>
        <section>
          <h6>Asynchronous Programming</h6>
          <h2>Promises</h2>
        </section>
        <section>
          <h2>Producing a promise</h2>
          <pre><code>
             function asyncFunc() {
                return new Promise(
                   (resolve, reject) => {
                      …
                      if (…) {
                         resolve(result); // success
                      } else {
                         reject(error); // failure
                      }
                   })
             }
          </code></pre>
          <pre><code>
              Promise.resolve(42)
          </code></pre>
          <pre><code>
              Promise.reject('could not find answer')
          </code></pre>
        </section>
        <section>
          <h6>Promises</h6>
          <h2>Consuming a promise</h2>
          <pre><code>
             asyncFunc()
                .then(result => { … })
                .catch(error => { … });
          </code></pre>
        </section>
        <section>
          <h2>Promise state</h2>
          <img src="media/promise-states.jpg" width="50%">
          <br/>
          <small>from <a href="http://exploringjs.com/">exploringjs.com</a></small>
        </section>
        <section>
          <h6>Promises</h6>
          <h2>Example</h2>
          <p>Promisifying <code>setTimeout</code></p>
          <pre><code>
      function delay(ms) {
         return new Promise((resolve, reject) =>
            setTimeout(resolve, ms))
      }
          </code></pre>
          <pre><code>
      delay(5000).then(() =>
         console.log('5 seconds have passed!'));
          </code></pre>
        </section>
        <section>
          <h4>Example</h4>
          <p>Promisifying Node.js-style callbacks</p>
          <pre><code>
  fs.readFile('config.json',
     (error, text) => {
        if (error) {
           console.error('Error while reading config file')
        } else {
           try {
              const obj = JSON.parse(text)
              console.log(JSON.stringify(obj, null, 4))
           } catch (e) {
              console.error('Invalid JSON in file')
           }
       }
     })
          </code></pre>
          <p>becomes:</p>
          <pre><code>
   readFilePromisified('config.json')
      .then(text => {
         const obj = JSON.parse(text);
         console.log(JSON.stringify(obj, null, 4));
      })
      .catch(error => {
         console.error('An error occurred', error);
      });
          </code></pre>
        </section>
        <section>
          <h2>Promise Chaining</h2>
          <pre><code>
           asyncFunc1()
              .then(result1 => {
                 return asyncFunction2(result1)
                    .then(result2 => {
                       console.log(result2);
                    })
              })
          </code></pre>
          equivalent to
          <pre><code>
           asyncFunc1()
              .then(result1 => {
                  return asyncFunction2(result1)
              })
              .then(result2 => {
                 console.log(result3);
              })
              .catch(error => {
                 // handle errors of both async functions
              })
          </code></pre>
        </section>
        <section>
          <h2>Promises</h2>
          <p>Sequential execution</p>
          <pre><code>
              asyncFunc1().then(() => asyncFunc2());
          </code></pre>
          <p>Asynchronous execution</p>
          <pre><code>
              asyncFunc1()
              asyncFunc2()
          </code></pre>
        </section>
        <section>
          <h6>Promises</h6>
          <h2>Fork–Join</h2>
          <pre><code>
              Promise.all([
                 fetch('http://example.com/file1.txt'),
                 fetch('http://example.com/file2.txt')
              ])
              .then(([text1, text2]) => {
                 // use all results
              })
              .catch(error => {
                 // handle first rejection
              })
          </code></pre>
        </section>
        <section>
          <h6>Promises</h6>
          <h2>Fork-Race</h2>
          <pre><code>
              Promise.race([
                 fetch('http://example.com/file1.txt'),
                 fetch('http://example.com/file2.txt')
              ])
              .then(text => {
                 // use first available result
              })
              .catch(error => {
                 // handle rejection of all
              })
          </code></pre>
        </section>
        <section>
          <h2>Microtasks</h2>

          <p>Once a promise settles, it queues a microtask for its reactionary
          callbacks.</p>

          <p>The microtask queue is processed at the end of each task.</p>

          <p>Any additional microtasks queued during microtasks are added to
            the end of the queue and also processed.</p>
        </section>
        <section>
          <h2>Microtasks</h2>
          <p>What will this print on the console?</p>
          <pre><code>
          console.log('script start');

          setTimeout(function() {
            console.log('setTimeout');
          }, 0);

          Promise.resolve().then(function() {
            console.log('promise1');
          }).then(function() {
            console.log('promise2');
          });

          console.log('script end');
          </code></pre>
          <a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/">
            See it in action</a>
        </section>
      </section>

      <section>
        <section>
          <h2>Concurrency</h2>
          <p>Throwing umptazillion CPU cores at JavaScript doesn't buy you a
            whole lot:</p>
          <video src="media/Dancing-CPUs.mp4" height="500" controls>
            Sorry, your browser doesn't support embedded videos.
          </video>
        </section>
        <section>
          <h6>Concurrency</h6>
          <h2><a href="https://www.html5rocks.com/en/tutorials/workers/basics/">Web Workers</a></h2>
          <p>Each worker has its own runtime<br/>(stack, heap and task
          queue).</p>
          <div class="row">
            <img src="media/JavaScript-execution-model.svg" width="200" class="zen"/>
            <i class="fa fa-long-arrow-left"
               style="margin-left: 1em"
               aria-hidden="true"></i>
            <i class="fa fa-envelope"
               style="margin: 1ex"
               aria-hidden="true"></i>
            <i class="fa fa-long-arrow-right"
               style="margin-right: 1em"
               aria-hidden="true"></i>
            <img src="media/JavaScript-execution-model.svg" width="200" class="zen"/>
          </div>
          <p>Workers communicate via message passing<br/>(by adding tasks to
            each other's queues).</p>
        </section>
      </section>

      <section>
        <section>
          <h2>To conclude</h2>
          <p>Follow…</p>
          <img src="media/JavaScript-The-Good-Parts.jpg" width="40%"/>
          <img src="media/Functional-JavaScript.jpg" width="40%"/>
          <p><a href="http://www.crockford.com/javascript/little.html">JavaScript is Lisp</a> in C's clothing</p>
        </section>
        <section>
          <p>Avoid…</p>
          <p><a href="https://www.destroyallsoftware.com/talks/wat">WAT</a>
            moments<br/>
            <small>(start at 1:20)</small></p>
          <img src="media/JavaScript-The-Evil-Parts.png" width="40%"/>
        </section>
        <section>
          <h2>Not Covered</h2>
          <ul>
            <li><code>async</code> / <code>await</code></li>
            <li>Generators</li>
            <li>Iterables and iterators</li>
            <li>Reflection (including proxies)</li>
            <li>Symbols</li>
            <li>…</li>
          </ul>
        </section>
      </section>

      <section>
        <h2>Links</h2>
        <ul>
          <li><a href="http://exploringjs.com/es6/ch_variables.html#sec_temporal-dead-zone">ExploringJS</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide">MDN's JavaScript guide</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript">A re-introduction to JavaScript</a></li>
          <li><a href="http://eloquentjavascript.net">Eloquent JavaScript</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript">Learn web development: JavaScript</a></li>
        </ul>
      </section>

      <section>
        <h2 style="margin-bottom: 320px">Questions?</h2>
        <div class=glossy></div>
        <div class=yin-yang>
          <div class=yin></div>
          <div class=yang></div>
        </div>
        <div class=container></div>
      </section>

      <section>
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
          <img alt="Creative Commons License" src="media/by-sa.svg" />
        </a>
        <br />
        This work is licensed under a
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
          Creative Commons Attribution-ShareAlike 4.0 International License
        </a>
      </section>
    </div>
  </body>
</html>
